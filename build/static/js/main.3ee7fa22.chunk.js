(this["webpackJsonploftschool-nodejs-project"]=this["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{270:function(e,t){},354:function(e,t,n){"use strict";n.r(t);var a,r,c,s,i,o,l,u,d,j=n(0),h=n.n(j),m=n(12),b=n.n(m),p=n(18),f=n(15),O=n(22),x=n(23),g=n(20),v=n(21),w=n(10),N=n(178),y=n.n(N),S=n(6),C=n(131),k=n(419),E=n(34),T=n(179),P=n.n(T),A=n(25),I=n(418),R=Object(I.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),_=R.openNotification,D=R.closeNotification,L=function(e){return e.notifications},U=Object(k.a)((a={},Object(S.a)(a,_,(function(e,t){var n=t.payload,a=n.text,r=n.variant;return[].concat(Object(A.a)(e),[{text:a,variant:r,id:e.length+1,isActive:!e.length}])})),Object(S.a)(a,D,(function(e,t){var n=e.filter((function(e){return e.id!==t.payload}));return n.length?n.map((function(e,t){return t===n.length-1&&(e.isActive=!0),e})):n})),a),[]),F=U,M=P.a.create({baseURL:"http://localhost:3000/api/"}),W=[],H=!1,B=function(e){var t=e.url,n=e.method,a=e.data,r=e.headers,c=void 0===r?{}:r,s=e.isRefresh,i=e.isWithoutToken,o=e.getState,l=void 0===o?function(){return{}}:o,u=e.dispatch,d=void 0===u?function(){}:u;return new Promise((function(e,r){var o=q(l()),u=o.accessToken,j=o.accessTokenExpiredAt,h=o.refreshTokenExpiredAt,m=function(e){var t=e.url,n=e.method,a=e.headers,r=e.data,c=e.resolve,o=e.reject;if(!i){var u=q(l()),j=u.accessToken,h=u.refreshToken;a.Authorization=s?h:j}return M({url:t,method:n,headers:a,data:r}).then((function(e){c(e.data)})).catch((function(e){if(!e.response)return d(_({variant:"error",text:"Error!!\n".concat(e.message)})),o(e.message);var n=e.response.status||404,a=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+n),console.dir(a),console.groupEnd(),n){case 401:case 403:return d(ie()),o(a);case 500:case 502:case 503:return d(_({variant:"error",text:"".concat(n,"!\nSomething is wrong))")})),o({detail:"Unknown error"});default:return o(a)}}))},b=j<=Date.now(),p=h<=Date.now();u&&b&&!p&&!i?(!s&&W.push({url:t,method:n,data:a,headers:c,isRefresh:s,resolve:e,reject:r}),s||H?s&&m({url:t,method:n,data:a,headers:c,resolve:e,reject:r}):(H=!0,d(se()).then((function(){H=!1,W.forEach((function(e){return m(e)}))})).catch((function(){d(ie()),r({detail:"Refresh token error"})})))):p&&!i?(d(ie()),r({detail:"Refresh token is expired"})):m({url:t,method:n,data:a,headers:c,resolve:e,reject:r})}))},G=function(e){return e.auth.userProfile},z=function(e){return e.auth.permissions},q=function(e){return e.auth.tokens},V=function(e){return!!e.auth.tokens.accessToken},X=function(e){return e.auth.isLoadingUserProfile},J="AUTH",Z=(Object(C.a)("".concat(J,"/LOGIN_USER_REQUEST")),Object(C.a)("".concat(J,"/REGISTRATION_USER_REQUEST")),Object(C.a)("".concat(J,"/SET_PROFILE_DATA"))),Q=Object(C.a)("".concat(J,"/SET_TOKEN_DATA")),Y=Object(C.a)("".concat(J,"/LOGOUT_USER")),K=Object(C.a)("".concat(J,"/SET_IS_LOADING_USER_PROFILE")),$=Object(k.a)(Object(S.a)({},K,(function(e,t){return t.payload})),!1),ee=Object(k.a)((r={},Object(S.a)(r,Z,(function(e,t){var n=t.payload,a=n.id,r=n.image,c=n.middleName,s=n.surName,i=n.username;return{id:a,image:r,firstName:n.firstName,middleName:c,surName:s,username:i}})),Object(S.a)(r,Y,(function(){return null})),r),null),te={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},ne=Object(k.a)((c={},Object(S.a)(c,Z,(function(e,t){return t.payload.permission})),Object(S.a)(c,Y,(function(){return te})),c),te),ae=Object(k.a)((s={},Object(S.a)(s,Q,(function(e,t){var n=t.payload;return{accessToken:n.accessToken,accessTokenExpiredAt:n.accessTokenExpiredAt,refreshToken:n.refreshToken,refreshTokenExpiredAt:n.refreshTokenExpiredAt}})),Object(S.a)(s,Y,(function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}})),s),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),re=Object(E.b)({userProfile:ee,permissions:ne,tokens:ae,isLoadingUserProfile:$}),ce=function(){return function(e,t){var n=localStorage.getItem("token-data");n&&(e(Q(JSON.parse(n))),B({url:"/profile",method:"GET",dispatch:e,getState:t}).then((function(t){e(Z(t))})).catch((function(e){})))}},se=function(){return function(e,t){return new Promise((function(n,a){B({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then((function(t){e(Q(t)),n(n)})).catch((function(e){return a(e)}))}))}},ie=function(){return function(e){localStorage.removeItem("token-data"),e(Y()),_({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},oe=function(e){var t=e.firstName,n=e.surName,a=e.middleName,r=e.oldPassword,c=e.newPassword,s=e.avatar;return function(e,i){return new Promise((function(o){var l=new FormData;l.append("firstName",t),l.append("surName",n),l.append("middleName",a),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",s),e(K(!0)),B({url:"/profile",method:"PATCH",data:l,getState:i,dispatch:e}).then((function(t){e(Z(t)),e(_({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),o(!0)})).catch((function(t){return e(_({text:t.message,variant:"error"}))})).finally((function(){return e(K(!1))}))}))}},le="/",ue="/registration",de="/news",je="/chat",he="/profile",me="/admin-panel",be=n(2),pe=Object(w.b)((function(e){return{permissions:z(e),isAuthorized:V(e)}}))((function(e){var t=e.permissionPath,n=e.path,a=e.component,r=e.permissions;return!e.isAuthorized||t&&!y.a.get(r,[t,"R"],!1)?Object(be.jsx)(v.a,{from:n,to:le}):Object(be.jsx)(v.b,{path:n,component:a})})),fe=n(14),Oe=n(5),xe=n(416),ge=n(387),ve=n(388),we=n(389),Ne=n(29),ye=n(356),Se=h.a.forwardRef((function(e,t){return Object(be.jsx)(Ne.b,Object(g.a)({innerRef:t},e))})),Ce=Object(v.g)((function(e){var t=e.path,n=e.location,a=e.children,r=e.isRouterLink,c=e.color,s=void 0===c?"primary":c;return Object(be.jsx)(ye.a,{color:r?n.pathname===t?s:"default":s,component:Se,to:t,children:a})})),ke=n(35),Ee=n.n(ke),Te=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,n=e.profile;return Object(be.jsxs)(be.Fragment,{children:[Ee()(t,"news.R",!1)&&Object(be.jsx)(Ce,{path:de,isRouterLink:!0,children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Ee()(t,"chat.R",!1)&&Object(be.jsx)(Ce,{path:je,isRouterLink:!0,children:"\u0427\u0430\u0442"}),Ee()(t,"settings.R",!1)&&Object(be.jsx)(Ce,{path:me,isRouterLink:!0,children:"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"}),Object(be.jsx)(Ce,{path:he,isRouterLink:!0,children:n?n.username:""})]})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isAuthorized;return Object(be.jsx)("div",{children:Object(be.jsx)(ge.a,{position:"static",color:"default",className:t.appBar,children:Object(be.jsx)(ve.a,{children:Object(be.jsxs)(we.a,{children:[Object(be.jsx)("div",{className:t.logo,children:Object(be.jsx)("img",{src:"../../assets/img/logo.png",alt:"logo"})}),Object(be.jsx)(Ce,{path:le,isRouterLink:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),n?this.renderAuthorizedNav():null]})})})})}}]),n}(j.PureComponent),Pe=Object(fe.a)(Object(Oe.a)((function(){return{logo:{flexGrow:1}}})),Object(w.b)((function(e){return{isAuthorized:V(e),permissions:z(e),profile:G(e)}})))(Te),Ae=n(48),Ie=n(30),Re=n(133),_e=n(390),De=n(422),Le=n(391),Ue=n(392),Fe=n(393),Me=Object(Oe.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,n=e.classes,a=e.handleChange,r=e.value,c=e.label,s=e.required;return Object(be.jsxs)(_e.a,{className:n.textField,required:s,children:[Object(be.jsx)(De.a,{htmlFor:"input-"+t,children:c}),Object(be.jsx)(Le.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:a,startAdornment:Object(be.jsx)(Ue.a,{position:"start",children:Object(be.jsx)(Fe.a,{})})})]})})),We=n(395),He=n(394),Be=n(396),Ge=n(397),ze=n(54),qe=n.n(ze),Ve=Object(Oe.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,n=e.classes,a=e.handleChange,r=e.value,c=e.label,s=e.className,i=e.name,o=h.a.useState({showPassword:!1}),l=Object(Ie.a)(o,2),u=l[0],d=l[1];return Object(be.jsxs)(_e.a,{className:qe()(n.textField,s),required:!0,children:[Object(be.jsx)(De.a,{htmlFor:t,children:c}),Object(be.jsx)(Le.a,{id:t,autoComplete:t,type:u.showPassword?"text":"password",name:i,value:r,onChange:a,startAdornment:Object(be.jsx)(Ue.a,{position:"start",children:Object(be.jsx)(He.a,{})}),endAdornment:Object(be.jsx)(Ue.a,{position:"end",children:Object(be.jsx)(We.a,{"aria-label":"toggle password visibility",onClick:function(){d({showPassword:!u.showPassword})},onMouseDown:function(e){e.preventDefault()},children:u.showPassword?Object(be.jsx)(Be.a,{}):Object(be.jsx)(Ge.a,{})})})})]})})),Xe=Object(fe.a)(Object(Oe.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(w.b)())((function(e){var t=e.classes,n=e.dispatch,a=Object(j.useState)({username:"",password:""}),r=Object(Ie.a)(a,2),c=r[0],s=r[1],i=function(e){return function(t){s(Object(g.a)(Object(g.a)({},c),{},Object(S.a)({},e,t.target.value)))}};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(Re.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=c.username,a=c.password;n(function(e){var t=e.username,n=e.password;return function(e,a){return new Promise((function(r,c){B({url:"/login",method:"POST",data:{username:t,password:n},isWithoutToken:!0,dispatch:e,getState:a}).then((function(t){e(_({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var n=t.accessToken,a=t.accessTokenExpiredAt,c=t.refreshToken,s=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:n,accessTokenExpiredAt:a,refreshToken:c,refreshTokenExpiredAt:s})),e(Z(t)),e(Q(t)),r(t)})).catch((function(t){e(_({text:t.message,variant:"error"})),c(t)}))}))}}({username:t,password:a}))},children:[Object(be.jsx)(Me,{handleChange:i("username"),value:c.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),Object(be.jsx)(Ve,{handleChange:i("password"),value:c.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(be.jsx)(ye.a,{color:"primary",variant:"contained",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(be.jsxs)(Ae.a,{className:qe()(t.textCenter,t.form),children:["\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",Object(be.jsx)(Ne.b,{to:ue,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})),Je=Object(fe.a)(Object(Oe.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(w.b)(),v.g)((function(e){var t=e.classes,n=e.dispatch,a=e.history,r=Object(j.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),c=Object(Ie.a)(r,2),s=c[0],i=c[1],o=function(e){return function(t){i(Object(g.a)(Object(g.a)({},s),{},Object(S.a)({},e,t.target.value)))}};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(Re.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=s.username,r=s.password,c=s.firstname,i=s.lastname,o=s.patronicname;n(function(e){var t=e.username,n=e.password,a=e.firstname,r=e.lastname,c=e.patronicname;return function(e,s){return new Promise((function(i,o){var l={username:t,surName:r,firstName:a,middleName:c,password:n};B({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:s}).then((function(){e(_({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),i(l)})).catch((function(t){e(_({text:t.message,variant:"error"})),o(t)}))}))}}({username:t,password:r,firstname:c,lastname:i,patronicname:o})).then((function(){return a.push(le)})).catch(console.error)},children:[Object(be.jsx)(Me,{id:"username",handleChange:o("username"),value:s.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),Object(be.jsx)(Me,{id:"lastname",handleChange:o("lastname"),value:s.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(be.jsx)(Me,{id:"firstname",handleChange:o("firstname"),value:s.firstname,label:"\u0418\u043c\u044f"}),Object(be.jsx)(Me,{id:"patronicname",handleChange:o("patronicname"),value:s.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(be.jsx)(Ve,{id:"password",handleChange:o("password"),value:s.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(be.jsx)(Ve,{id:"repeatPassword",handleChange:o("repeatPassword"),value:s.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(be.jsx)(ye.a,{color:"primary",variant:"contained",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(be.jsxs)(Ae.a,{className:qe()(t.textCenter,t.form),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(be.jsx)(Ne.b,{to:le,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),Ze=Object(fe.a)(Object(Oe.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}})),Object(w.b)())((function(e){var t=e.classes,n=e.dispatch;return Object(be.jsx)(Re.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),n(ie())},children:Object(be.jsx)(ye.a,{color:"primary",variant:"contained",type:"submit",children:"\u0412\u044b\u0439\u0442\u0438"})})})),Qe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isAuthorized;return Object(be.jsx)("div",{className:t.wrapper,children:Object(be.jsxs)(ve.a,{children:[Object(be.jsxs)(Ae.a,{variant:"h4",component:"h2",gutterBottom:!0,children:["\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",Object(be.jsx)("br",{}),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"]}),n?Object(be.jsx)(Ze,{}):Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(v.b,{path:"/",exact:!0,component:Xe}),Object(be.jsx)(v.b,{path:"/registration",component:Je})]})]})})}}]),n}(j.PureComponent),Ye=Object(fe.a)(Object(Oe.a)((function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})),Object(w.b)((function(e){return{isAuthorized:V(e)}})),v.g)(Qe),Ke=n(357),$e=function(e){return e.news.isLoadingNewsList},et=function(e){return e.news.isLoadingNewsForm},tt=function(e){return e.news.isLoaded},nt=function(e){return e.news.news},at="NEWS",rt=Object(C.a)("".concat(at,"/SET_IS_LOADING_NEWS_LIST")),ct=Object(C.a)("".concat(at,"/SET_IS_LOADING_NEWS_FORM")),st=Object(C.a)("".concat(at,"/SET_NEWS_LIST")),it=Object(C.a)("".concat(at,"/APPEND_NEWS")),ot=Object(C.a)("".concat(at,"/SET_TO_ZERO_NEWS_LIST")),lt=(Object(C.a)("".concat(at,"/SET_IS_LOADED")),Object(k.a)(Object(S.a)({},rt,(function(e,t){return t.payload})),!1)),ut=Object(k.a)(Object(S.a)({},ct,(function(e,t){return t.payload})),!1),dt=Object(k.a)(Object(S.a)({},st,(function(e,t){return!0})),!1),jt=Object(k.a)((i={},Object(S.a)(i,st,(function(e,t){return t.payload})),Object(S.a)(i,it,(function(e,t){return[t.payload].concat(Object(A.a)(e))})),Object(S.a)(i,ot,(function(){return[]})),i),[]),ht=Object(E.b)({isLoadingNewsList:lt,isLoadingNewsForm:ut,isLoaded:dt,news:jt}),mt=function(e){var t=e.title,n=e.text;return function(e,a){return new Promise((function(r,c){var s={title:t,text:n};e(ct(!0)),B({url:"/news",method:"POST",data:s,getState:a,dispatch:e}).then((function(t){e(st(t)),r(t)})).catch((function(e){c(e)})).finally((function(){return e(ct(!1))}))}))}},bt=function(e){var t=e.id,n=e.title,a=e.text;return function(e,r){return new Promise((function(c,s){var i={title:n,text:a};e(ct(!0)),B({url:"/news/".concat(t),method:"PATCH",data:i,getState:r,dispatch:e}).then((function(t){e(st(t)),c(t)})).catch((function(e){s(e)})).finally((function(){return e(ct(!1))}))}))}},pt=n(398),ft=n(399),Ot=n(423),xt=n(400),gt=n(401),vt=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},wt=Object(Ke.a)(vt)((function(e){var t=e.classes,n=e.post,a=e.dispatch,r=e.permission,c=!!Ee()(r,"news.U",!1),s=!!Ee()(r,"news.D",!1);return Object(be.jsxs)(pt.a,{className:t.card,children:[Object(be.jsx)(ft.a,{avatar:Object(be.jsx)(Ot.a,{"aria-label":"recipe",src:n.user.image||"/assets/img/no-user-image.png",alt:n.user.username}),title:n.title,subheader:n.created_at}),Object(be.jsx)(xt.a,{children:Object(be.jsx)(Ae.a,{variant:"body2",color:"textSecondary",component:"p",children:n.text})}),Object(be.jsxs)(gt.a,{children:[c&&Object(be.jsx)(Ce,{path:"/news/".concat(n.id,"/edit"),children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),s&&Object(be.jsx)(ye.a,{onClick:function(){a(function(e){var t=e.id;return function(e,n){return new Promise((function(a,r){e(rt(!0)),B({url:"/news/".concat(t),method:"DELETE",getState:n,dispatch:e}).then((function(t){e(st(t)),a(t)})).catch((function(e){r(e)})).finally((function(){return e(rt(!1))}))}))}}({id:n.id}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})),Nt=Object(fe.a)(Object(Ke.a)(vt),Object(w.b)((function(e){return{permission:z(e)}})))(wt),yt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){tt(t())||(e(rt(!0)),B({url:"/news",method:"GET",getState:t,dispatch:e}).then((function(t){return e(st(t))})).catch((function(e){return console.log(e)})).finally((function(){return e(rt(!1))})))}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.isLoaded,a=e.news,r=e.permission,c=!!Ee()(r,"news.C",!1);return Object(be.jsxs)(be.Fragment,{children:[c&&Object(be.jsx)(Ce,{color:"primary",path:"".concat(de,"/add"),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(be.jsxs)("div",{children:[t?Object(be.jsx)("div",{children:"Loading..."}):null,n?a.length?a.map((function(e){return Object(be.jsx)(Nt,{post:e},e.id)})):Object(be.jsx)("div",{children:"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"}):null]})]})}}]),n}(j.PureComponent),St=Object(w.b)((function(e){return{isLoading:$e(e),isLoaded:tt(e),news:nt(e),permission:z(e)}}),null)(yt),Ct=n(402),kt=n(424),Et=n(405),Tt=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",text:"",createdAt:new Date,user:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(S.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.title,r=n.text,c=e.props,s=c.history,i=c.dispatch,o=c.match;i(o.params.id?bt({title:a,text:r,id:o.params.id}):mt({title:a,text:r})).then((function(){return s.push(de)}))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.newsList;if(t.params.id){var a=n.find((function(e){return e.id===t.params.id})),r=a.title,c=a.text,s=a.created_at,i=a.user;this.setState({title:r,text:c,createdAt:s,user:i.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.title,a=t.text,r=t.createdAt,c=t.user;return Object(be.jsx)(Re.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit,children:Object(be.jsxs)(Ct.a,{container:!0,spacing:2,children:[Object(be.jsxs)(Ct.a,{item:!0,xs:4,children:[Object(be.jsx)(kt.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:c,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),Object(be.jsx)(kt.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),Object(be.jsx)(kt.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})]}),Object(be.jsxs)(Ct.a,{item:!0,xs:8,children:[Object(be.jsx)(kt.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),Object(be.jsxs)(Et.a,{children:[Object(be.jsx)(ye.a,{variant:"contained",color:"secondary",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(be.jsx)(Ce,{path:"/news",variant:"contained",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})]})})}}]),n}(j.PureComponent),Pt=Object(fe.a)(Object(Ke.a)((function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}})),v.g,Object(w.b)((function(e){return{isLoading:et(e),newsList:nt(e)}}),null))(Tt),At=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(be.jsx)("div",{className:e.wrapper,children:Object(be.jsxs)(ve.a,{children:[Object(be.jsx)(Ae.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(be.jsx)(v.b,{path:"/news",exact:!0,component:St}),Object(be.jsx)(v.b,{path:"/news/add",component:Pt}),Object(be.jsx)(v.b,{path:"/news/:id/edit",component:Pt})]})})}}]),n}(j.PureComponent),It=Object(Ke.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}))(At),Rt=n(186),_t=n.n(Rt),Dt=null,Lt=function(e){return e.chat.users},Ut=function(e){return e.chat.messages},Ft=function(e){return e.chat.selectedRoom},Mt=function(e){return e.chat.messageText},Wt="CHAT",Ht=Object(C.a)("".concat(Wt,"/SET_USERS")),Bt=Object(C.a)("".concat(Wt,"/ADD_USER")),Gt=Object(C.a)("".concat(Wt,"/UPDATE_USER")),zt=Object(C.a)("".concat(Wt,"/REMOVE_USER")),qt=Object(C.a)("".concat(Wt,"/ADD_MESSAGE")),Vt=Object(C.a)("".concat(Wt,"/SET_ROOM_HISTORY")),Xt=Object(C.a)("".concat(Wt,"/SET_TO_ZERO_MESSAGES")),Jt=Object(C.a)("".concat(Wt,"/SET_SELECTED_ROOM")),Zt=Object(C.a)("".concat(Wt,"/SET_MESSAGE_TEXT")),Qt=Object(C.a)("".concat(Wt,"/RESET_MESSAGE")),Yt=Object(k.a)((o={},Object(S.a)(o,Ht,(function(e,t){return t.payload})),Object(S.a)(o,Bt,(function(e,t){return[t.payload].concat(Object(A.a)(e))})),Object(S.a)(o,Gt,(function(e,t){return e.map((function(e){return e.userId===t.payload.userId?t.payload:e}))})),Object(S.a)(o,zt,(function(e,t){return e.filter((function(e){return e.socketId!==t.payload}))})),o),[]),Kt=Object(k.a)((l={},Object(S.a)(l,qt,(function(e,t){return[].concat(Object(A.a)(e),[t.payload])})),Object(S.a)(l,Vt,(function(e,t){return t.payload})),Object(S.a)(l,Xt,(function(){return[]})),l),[]),$t=Object(k.a)(Object(S.a)({},Jt,(function(e,t){return t.payload})),null),en=Object(k.a)((u={},Object(S.a)(u,Zt,(function(e,t){return t.payload})),Object(S.a)(u,Qt,(function(){return""})),u),""),tn=Object(E.b)({users:Yt,messages:Kt,selectedRoom:$t,messageText:en}),nn=function(){return function(e,t){var n=t(),a=G(n),r=Ft(n),c=Mt(n);Dt.emit("message:add",{senderId:a.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(Qt())}},an=n(406),rn=n(404),cn=n(360),sn=n(407),on=Object(fe.a)(Object(Ke.a)((function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}})),Object(w.b)((function(e){return{users:Lt(e),selectedRoom:Ft(e)}})))((function(e){var t=e.classes,n=e.users,a=e.selectedRoom,r=e.dispatch,c=function(e){r(function(e){var t=e.userId,n=e.socketId;return function(e,a){var r=G(a());e(Xt()),e(Jt({recipientId:t,socketId:n})),Dt.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return Object(be.jsxs)(Re.a,{className:t.column,square:!0,children:[Object(be.jsx)(ft.a,{title:Object(be.jsx)(Ae.a,{variant:"h5",children:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b"})}),Object(be.jsx)(an.a,{}),Object(be.jsx)(rn.a,{children:n.map((function(e,t){return Object(be.jsx)(cn.a,{button:!0,selected:e.userId===a&&a.userId,onClick:function(){return c(e)},children:Object(be.jsx)(sn.a,{primary:e.username})},e.userId)}))})]})})),ln=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){(0,e.props.dispatch)(Zt(t.target.value))},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.dispatch)(nn())},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.messages,a=e.messageText,r=e.userId,c=e.permission,s=!!Ee()(c,"chat.C",!1);return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(xt.a,{className:t.chatArea,children:Object(be.jsx)(Ct.a,{container:!0,direction:"column",wrap:"nowrap",children:n.map((function(e,n){return Object(be.jsx)(Ct.a,{item:!0,className:qe()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage),children:Object(be.jsx)(pt.a,{className:qe()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary),children:e.text})},n)}))})}),s&&Object(be.jsx)(gt.a,{children:Object(be.jsxs)("form",{onSubmit:this.handleSubmit,className:t.form,children:[Object(be.jsx)(kt.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:a,onChange:this.handleChange}),Object(be.jsx)(ye.a,{variant:"contained",color:"primary",type:"submit",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})]})}}]),n}(j.PureComponent),un=Object(fe.a)(Object(Ke.a)((function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}})),Object(w.b)((function(e){return{messageText:Mt(e),userId:G(e).id,permission:z(e)}})))(ln),dn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){var n=G(t());(Dt=_t()("http://localhost:3000")).emit("users:connect",{userId:n.id,username:n.username}),Dt.on("users:list",(function(t){return e(Ht(t))})).on("users:add",(function(t){return e(Bt(t))})).on("users:leave",(function(n){e(zt(n));var a=Ft(t());a&&a.socketId===n&&e(Jt(null))})).on("message:history",(function(t){return e(Vt(t))})).on("message:add",(function(t){return e(qt(t))}))}))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)((function(e){Dt&&Dt.disconnect(),e(Ht([])),e(Xt()),e(Jt(null)),e(Qt())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.users,a=e.messages,r=e.selectedRoom;return Object(be.jsx)("div",{className:t.wrapper,children:Object(be.jsx)(ve.a,{children:Object(be.jsxs)(Ct.a,{container:!0,spacing:1,children:[Object(be.jsx)(Ct.a,{item:!0,xs:4,children:Object(be.jsx)(on,{users:n,selected:r})}),Object(be.jsx)(Ct.a,{item:!0,xs:8,children:Object(be.jsx)(pt.a,{className:t.column,square:!0,children:r?Object(be.jsx)(un,{messages:a}):Object(be.jsx)("div",{className:t.empty,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"})})})]})})})}}]),n}(j.PureComponent),jn=Object(fe.a)(Object(Ke.a)((function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}})),Object(w.b)((function(e){return{users:Lt(e),selectedRoom:Ft(e),messages:Ut(e)}})))(dn),hn=n(187),mn=n.n(hn),bn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:h.a.createRef()},e.cancelHandler=function(){var t=e.props.userProfile;e.setState({firstName:t.firstName,middleName:t.middleName,surName:t.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:t.image})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(S.a)({},a,r))},e.handleChangeFile=function(){var t=e.state.fileRef,n=new FileReader;n.onload=function(t){e.setState({image:t.target.result})},t.current.files[0]&&n.readAsDataURL(t.current.files[0])},e.submitHandler=function(){var t=e.props.dispatch,n=e.state,a=n.firstName,r=n.surName,c=n.middleName,s=n.oldPassword,i=n.newPassword,o=n.fileRef;t(oe({firstName:a,surName:r,middleName:c,oldPassword:s,newPassword:i,avatar:o.current.files[0]||null})).then((function(){e.cancelHandler()}))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isLoading,a=this.state,r=a.firstName,c=a.surName,s=a.middleName,i=a.oldPassword,o=a.newPassword,l=a.confirmPassword,u=a.image,d=a.fileRef;return Object(be.jsx)("div",{className:t.wrapper,children:Object(be.jsx)(ve.a,{children:Object(be.jsx)(Re.a,{className:t.formCard,children:Object(be.jsxs)(Ct.a,{container:!0,spacing:2,children:[Object(be.jsxs)(Ct.a,{item:!0,xs:4,children:[Object(be.jsx)(mn.a,{className:t.avatarPreviewWrapper,children:Object(be.jsx)(Ot.a,{className:t.avatarPreview,src:u||"/assets/img/no-user-image-big.png"})}),Object(be.jsxs)(ye.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary",children:["\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",Object(be.jsx)("input",{type:"file",style:{display:"none"},ref:d,onChange:this.handleChangeFile})]})]}),Object(be.jsx)(Ct.a,{item:!0,xs:8,children:Object(be.jsxs)(Ct.a,{container:!0,direction:"column",style:{height:"100%"},children:[Object(be.jsx)(Ae.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(be.jsxs)("div",{className:t.form,children:[Object(be.jsx)(kt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:c,onChange:this.handleChange}),Object(be.jsx)(kt.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),Object(be.jsx)(kt.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:s,onChange:this.handleChange})]}),Object(be.jsx)(Ae.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(be.jsxs)("div",{className:t.form,children:[Object(be.jsx)(Ve,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:i,handleChange:this.handleChange}),Object(be.jsx)(Ve,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:o,handleChange:this.handleChange}),Object(be.jsx)(Ve,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:l,handleChange:this.handleChange})]}),Object(be.jsxs)(gt.a,{className:t.formActions,children:[Object(be.jsx)(ye.a,{color:"primary",variant:"contained",disabled:n,onClick:this.submitHandler,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(be.jsx)(ye.a,{variant:"outlined",onClick:this.cancelHandler,disabled:n,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})]})})]})})})})}}]),n}(j.PureComponent),pn=Object(fe.a)(Object(Ke.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}})),Object(w.b)((function(e){return{userProfile:G(e),isLoading:X(e)}})))(bn),fn=n(130),On=n.n(fn),xn=function(e){return e.adminPanel.isLoadingUsers},gn=function(e){return e.adminPanel.users},vn="ADMIN_PANEL",wn=Object(C.a)("".concat(vn,"/SET_IS_LOADING_USERS")),Nn=Object(C.a)("".concat(vn,"/SET_IS_LOADING_FORM")),yn=Object(C.a)("".concat(vn,"/SET_USERS")),Sn=Object(C.a)("".concat(vn,"/SET_TO_ZERO_USERS")),Cn=Object(k.a)(Object(S.a)({},wn,(function(e,t){return t.payload})),!1),kn=Object(k.a)(Object(S.a)({},Nn,(function(e,t){return t.payload})),!1),En=Object(k.a)((d={},Object(S.a)(d,yn,(function(e,t){return t.payload})),Object(S.a)(d,Sn,(function(){return[]})),d),[]),Tn=Object(E.b)({isLoadingUsers:Cn,isLoadingForm:kn,users:En}),Pn=function(){return function(e,t){e(wn(!0)),B({url:"/users",getState:t,dispatch:e}).then((function(t){e(yn(t))})).catch((function(e){return _({text:e.message,variant:"error"})})).finally((function(){return e(wn(!1))}))}},An=function(e,t){return function(n,a){return new Promise((function(r){n(Nn(!0)),B({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:a,dispatch:n}).then((function(){_({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),n(Pn()),Ee()(G(a()),"id",null)===e&&n(ce()),r(!0)})).catch((function(e){_({text:e.message,variant:"error"})})).finally((function(){return n(Nn(!1))}))}))}},In=function(e){return function(t,n){return new Promise((function(a){t(Nn(!0)),B({url:"/users/".concat(e),method:"DELETE",getState:n,dispatch:t}).then((function(e){t(Pn()),a(!0)})).catch((function(e){_({text:e.message,variant:"error"})})).finally((function(){return t(Nn(!1))}))}))}},Rn=n(417),_n=n(410),Dn=n(408),Ln=n(409),Un=n(420),Fn=function(e){var t=e.handleChange,n=e.values,a=e.label;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Ae.a,{variant:"h5",component:"h3",gutterBottom:!0,children:a}),Object(be.jsxs)(Dn.a,{children:[Object(be.jsx)(Ln.a,{control:Object(be.jsx)(Un.a,{checked:n.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),Object(be.jsx)(Ln.a,{control:Object(be.jsx)(Un.a,{checked:n.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),Object(be.jsx)(Ln.a,{control:Object(be.jsx)(Un.a,{checked:n.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(be.jsx)(Ln.a,{control:Object(be.jsx)(Un.a,{checked:n.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})]})]})},Mn={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},Wn=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Mn,e.handleChange=function(t){return function(n){return function(a){var r=a.target.checked,c=e.state.permission;e.setState({permission:Object(g.a)(Object(g.a)({},c),{},Object(S.a)({},t,Object(g.a)(Object(g.a)({},c[t]),{},Object(S.a)({},n,r))))})}}},e.handleChangeUser=function(t){var n=e.props.users,a=t.target.value,r=a?On()(n.find((function(e){return e.id===a}))):null;e.setState({selectedUserId:a,selectedUser:r,permission:r.permission})},e.submitHandler=function(){var t=e.state,n=t.permission,a=t.selectedUserId;(0,e.props.dispatch)(An(a,n))},e.cancelHandler=function(){var t=e.props.users,n=e.state.selectedUserId,a=On()(t.find((function(e){return e.id===n})));n&&e.setState({selectedUser:a,permission:a.permission})},e.deleteHandler=function(){var t=e.state.selectedUserId,n=e.props.dispatch;t&&n(In(t)).then((function(){return e.setState(Mn)}))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Pn())}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.users,a=this.state,r=a.selectedUserId,c=a.selectedUser;return Object(be.jsx)("div",{className:t.wrapper,children:Object(be.jsx)(ve.a,{children:Object(be.jsxs)(Re.a,{className:t.formCard,children:[Object(be.jsxs)(Ct.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3,children:[Object(be.jsx)(Ot.a,{src:c&&c.image||"/assets/img/no-user-image.png",className:t.userAvatar}),Object(be.jsxs)(_e.a,{className:t.userSelect,children:[Object(be.jsx)(De.a,{htmlFor:"age-simple",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(be.jsxs)(Rn.a,{value:r,onChange:this.handleChangeUser,children:[Object(be.jsx)(_n.a,{value:null,children:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"}),n.map((function(e){return Object(be.jsx)(_n.a,{value:e.id,children:e.username},e.id)}))]})]})]}),c&&this.renderForms()]})})})}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(Ct.a,{container:!0,spacing:2,className:e.mb3,children:[Object(be.jsx)(Ct.a,{item:!0,xs:4,children:Object(be.jsx)(Fn,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})}),Object(be.jsx)(Ct.a,{item:!0,xs:4,children:Object(be.jsx)(Fn,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})}),Object(be.jsx)(Ct.a,{item:!0,xs:4,children:Object(be.jsx)(Fn,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")})})]}),Object(be.jsx)(Ct.a,{container:!0,spacing:2,justify:"center",alignItems:"center",children:Object(be.jsxs)(Et.a,{children:[Object(be.jsx)(ye.a,{variant:"contained",color:"secondary",onClick:this.submitHandler,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(be.jsx)(ye.a,{variant:"contained",onClick:this.cancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(be.jsx)(ye.a,{variant:"contained",onClick:this.deleteHandler,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]})}}]),n}(j.PureComponent),Hn=Object(fe.a)(Object(Ke.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}})),Object(w.b)((function(e){return{isLoading:xn(e),users:gn(e)}})))(Wn),Bn=n(3),Gn=n(4),zn=n(188),qn=n.n(zn),Vn=n(190),Xn=n.n(Vn),Jn=n(191),Zn=n.n(Jn),Qn=n(192),Yn=n.n(Qn),Kn=n(105),$n=n(412),ea=n(426),ta=n(413),na=n(189),aa=n.n(na),ra=n(411),ca=["className","message","onClose","variant"],sa=["openNotification","closeNotification","notifications"],ia={success:qn.a,warning:aa.a,error:Xn.a,info:Zn.a},oa=Object(ra.a)((function(e){return{success:{backgroundColor:Kn.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:$n.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function la(e){var t=oa(),n=e.className,a=e.message,r=e.onClose,c=e.variant,s=Object(Bn.a)(e,ca),i=ia[c];return Object(be.jsx)(ta.a,Object(g.a)({className:Object(Gn.a)(t[c],n),"aria-describedby":"client-snackbar",message:Object(be.jsxs)("span",{id:"client-snackbar",className:t.message,children:[Object(be.jsx)(i,{className:Object(Gn.a)(t.icon,t.iconVariant)}),a]}),action:[Object(be.jsx)(We.a,{"aria-label":"close",color:"inherit",onClick:r,children:Object(be.jsx)(Yn.a,{className:t.icon})},"close")]},s))}var ua=function(e){var t={openNotification:_,closeNotification:D};return Object(w.b)((function(e){return{notifications:L(e)}}),t)((function(t){var n=t.openNotification,a=t.closeNotification,r=t.notifications,c=Object(Bn.a)(t,sa),s=function(e){return function(t,n){"clickaway"!==n&&a(e)}},i=r.find((function(e){return!!e.isActive}));return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(e,Object(g.a)(Object(g.a)({},c),{},{openNotification:n})),i&&Object(be.jsx)(ea.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:s(i.id),children:Object(be.jsx)(la,{onClose:s(i.id),variant:i.variant,message:i.text})})]})}))},da=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},ja=Object(Oe.a)(da)((function(e){var t=e.children,n=e.classes;return Object(be.jsx)("div",{className:n.mainLayoutWrapper,children:t})})),ha=function(e){return ua(function(e){return function(t){return Object(be.jsx)(ja,{children:Object(be.jsx)(e,Object(g.a)({},t))})}}(e))},ma=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(ce())}},{key:"render",value:function(){var e=this.props.classes;return Object(be.jsxs)("div",{className:e.root,children:[Object(be.jsx)(Pe,{}),Object(be.jsx)(xe.a,{className:e.container,children:Object(be.jsxs)(v.d,{children:[Object(be.jsx)(v.b,{path:le,exact:!0,component:ua(Ye)}),Object(be.jsx)(v.b,{path:ue,component:ua(Ye)}),Object(be.jsx)(pe,{permissionPath:"news",path:de,component:ha(It)}),Object(be.jsx)(pe,{permissionPath:"chat",path:je,component:ha(jn)}),Object(be.jsx)(pe,{path:he,component:ha(pn)}),Object(be.jsx)(pe,{permissionPath:"settings",path:me,component:ha(Hn)})]})})]})}}]),n}(j.PureComponent),ba=Object(fe.a)(Object(Oe.a)(da),Object(w.b)())(ma),pa=n(415),fa=n(414),Oa=n(104),xa=n(194),ga=Object(xa.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:Oa.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),va=n(193),wa=Object(E.b)({auth:re,notifications:F,news:ht,adminPanel:Tn,chat:tn}),Na=function(){return Object(E.d)(wa,Object(E.c)(Object(E.a)(va.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};b.a.render(Object(be.jsxs)(fa.a,{theme:ga,children:[Object(be.jsx)(pa.a,{}),Object(be.jsx)(w.a,{store:Na(),children:Object(be.jsx)(Ne.a,{children:Object(be.jsx)(ba,{})})})]}),document.getElementById("root"))}},[[354,1,2]]]);
//# sourceMappingURL=main.3ee7fa22.chunk.js.map